<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Projeto Disciplina</title>

<link rel="manifest" href="manifest.json">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#0f0f0f,#1e1e1e);
  color: white;
  text-align: center;
}

.container {
  padding: 20px;
  max-width: 500px;
  margin: auto;
}

.card {
  background: #1c1c1c;
  padding: 20px;
  border-radius: 15px;
  margin-bottom: 20px;
  box-shadow: 0 0 20px rgba(0,0,0,0.4);
}

button {
  padding: 12px;
  width: 100%;
  border-radius: 10px;
  border: none;
  margin-top: 10px;
  font-size: 16px;
  cursor: pointer;
}

.primary { background: #00ff88; }
.danger { background: #ff4444; }
.meta-btn { background: #333; color: white; margin: 5px 0; }

textarea {
  width: 100%;
  height: 80px;
  border-radius: 10px;
  border: none;
  padding: 10px;
  margin-top: 10px;
}

.history {
  text-align: left;
  max-height: 200px;
  overflow-y: auto;
  font-size: 14px;
}

.progress-container {
  width: 100%;
  height: 20px;
  background: #333;
  border-radius: 20px;
  margin-top: 10px;
  overflow: hidden;
}

.progress-bar {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg,#00ff88,#00ccff);
  border-radius: 20px;
  transition: width 0.4s ease;
}

.checkbox {
  margin-top: 10px;
}
</style>
</head>
<body>

<div class="container">

<h1>ğŸ”¥ Projeto Disciplina</h1>

<div class="card">
<h2>Dias: <span id="dias">0</span></h2>
<h3>Streak: <span id="streak">0</span></h3>
<h3>Meta: <span id="meta">30</span> dias</h3>

<div class="progress-container">
  <div class="progress-bar" id="progressBar"></div>
</div>

<p id="porcentagem"></p>
</div>

<div class="card">
<h3>ğŸ“ Como foi seu dia?</h3>
<textarea id="texto" placeholder="Escreva algo sobre hoje..."></textarea>

<div class="checkbox">
<input type="checkbox" id="academia">
<label>Academia</label>
</div>

<button class="primary" onclick="addDia()">Adicionar Dia</button>
</div>

<div class="card">
<h3>ğŸ¯ Metas</h3>
<button class="meta-btn" onclick="setMeta(30)">30 dias</button>
<button class="meta-btn" onclick="setMeta(60)">60 dias</button>
<button class="meta-btn" onclick="setMeta(90)">90 dias</button>
</div>

<div class="card">
<h3>ğŸ“œ HistÃ³rico</h3>
<div class="history" id="history"></div>
</div>

<div class="card">
<h3>ğŸ’¬ MotivaÃ§Ã£o</h3>
<p id="motivacao"></p>
</div>

<div class="card">
<button class="danger" onclick="resetar()">Resetar Tudo</button>
</div>

</div>

<script>
let dias = localStorage.getItem("dias") ? parseInt(localStorage.getItem("dias")) : 0;
let streak = localStorage.getItem("streak") ? parseInt(localStorage.getItem("streak")) : 0;
let meta = localStorage.getItem("meta") ? parseInt(localStorage.getItem("meta")) : 30;
let history = localStorage.getItem("history") ? JSON.parse(localStorage.getItem("history")) : [];

const frases = [
"Disciplina cria liberdade.",
"VocÃª estÃ¡ se tornando mais forte.",
"Controle Ã© poder.",
"Um dia de cada vez.",
"Seu futuro agradece.",
"Sem atalhos. SÃ³ evoluÃ§Ã£o.",
"VocÃª estÃ¡ vencendo."
];

function atualizarTela() {
  document.getElementById("dias").innerText = dias;
  document.getElementById("streak").innerText = streak;
  document.getElementById("meta").innerText = meta;

  let porcentagem = Math.min((dias / meta) * 100, 100);
  document.getElementById("progressBar").style.width = porcentagem + "%";
  document.getElementById("porcentagem").innerText =
    Math.floor(porcentagem) + "% concluÃ­do";

  if(porcentagem >= 80){
    document.getElementById("progressBar").style.background =
      "linear-gradient(90deg,#ffcc00,#ff4444)";
  } else {
    document.getElementById("progressBar").style.background =
      "linear-gradient(90deg,#00ff88,#00ccff)";
  }

  document.getElementById("motivacao").innerText =
    frases[Math.floor(Math.random() * frases.length)];

  let histHTML = "";
  history.slice().reverse().forEach(item => {
    histHTML += `<p><strong>Dia ${item.dia}:</strong> ${item.texto} ${item.academia ? "ğŸ‹ï¸" : ""}</p>`;
  });

  document.getElementById("history").innerHTML = histHTML;
}

function addDia() {
  let texto = document.getElementById("texto").value.trim();
  let academia = document.getElementById("academia").checked;

  if(texto === "") {
    alert("VocÃª precisa escrever sobre o dia!");
    return;
  }

  dias++;
  streak++;

  history.push({
    dia: dias,
    texto: texto,
    academia: academia
  });

  localStorage.setItem("dias", dias);
  localStorage.setItem("streak", streak);
  localStorage.setItem("meta", meta);
  localStorage.setItem("history", JSON.stringify(history));

  document.getElementById("texto").value = "";
  document.getElementById("academia").checked = false;

  if(dias >= meta) {
    alert("ğŸ‰ META CONCLUÃDA! VocÃª venceu!");
  }

  atualizarTela();
}

function setMeta(valor) {
  meta = valor;
  localStorage.setItem("meta", meta);
  atualizarTela();
}

function resetar() {
  if(confirm("Tem certeza que quer resetar tudo?")) {
    localStorage.clear();
    location.reload();
  }
}

atualizarTela();

if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>